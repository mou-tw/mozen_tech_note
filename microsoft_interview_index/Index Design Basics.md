## 比喻
想像一本普通的書：在書的最後會有索引，裡面列出關鍵字與其出現的頁碼，幫助你快速查找資料。

## Index
索引是與資料表或檢視相關聯的磁碟或記憶體結構，可加快從資料表或檢視中擷取資料列的速度。
## Row Store Index
是一個有序的值列表（排序後的資料）
每個值會指向實際儲存該值的資料頁面（data page）
索引本身也被儲存在特定的「索引頁面」（index pages）上
- 是以一棵 **B+ Tree（B+ 樹）** 的形式組織
- 索引鍵可以由一或多個欄位構成    
- 可以存在磁碟或記憶體中
- 可以用 rowstore 格式（橫向儲存）或 columnstore 格式（直向儲存）
### Root Page（根頁面）
是整棵索引樹的起點
像是「A 到 D 在第121頁」、「E 到 G 在第122頁」這樣的目錄頁
能夠快速導引你跳到對應的子頁面

### Leaf Pages（葉頁面）
是樹狀結構中最底層的節點
包含了指向實際資料頁面（data page）的指標（pointers）


## 索引設計
設計索引是一個 在查詢效能與維護成本之間的平衡行為：
- **索引（Narrow Index）**：只有少數欄位
  儲存空間小，維護成本低
  無法涵蓋太多查詢條件
- **寬索引（Wide Index）**：包含較多欄位
  可以涵蓋更多查詢，提高命中率
  卻佔用更多空間，且維護負擔較大
- 索引可新增、修改、刪除，**不會影響資料表的結構或應用程式**
- 故應勇於嘗試不同的索引組合以提升效能

### query optimizer
在 **SQL Server Management Studio (SSMS)** 中，可以使用：`Include Actual Execution Plan` 查看實際使用的索引
Index Seek（索引查找）：最佳情况，用于定向查找。
Index Scan（索引扫描）：扫描整个索引，可能因部分过滤条件而使用。
Clustered Index Scan（聚集索引扫描）：读取整张表（**Clustered Index Scan = 使用了索引，但性能类似全表扫描，只不过表是有序结构**。）
Table Scan（表扫描）：更低效，从头到尾读取整个表
如果你看到 Index Seek 或 Index Scan，说明确实使用到了索引；若是 Table Scan，则说明未使用索引。

